/* @iamcal/autolink-js 2021-05-07 */
"use strict";!function(){function t(){var t=this;return t.stripProtocols=!0,t.tagFill="",t.autoTitle=!0,t.maxLength=30,t}function e(t,e,n,r,i,s,o){for(var a=t.toLowerCase(),l=0,u=!0,h="",g=!0,p=0,c="",f="",m="",x="",d="",b=0;l<t.length&&u;){g=!0,e.lastIndex=l;var w=e.exec(a);if(w?(C=w.index,p=w[0].length,c=t.substr(l,C-l),f=t.substr(C,p),m=t.substr(0,C),x=t.substr(C+p),b=(d=c+f).length,m.split(/<\/a>/i).pop().match(/<a\s/i)&&(y("fail 1 at "+l),g=!1,l+=b,h+=d)):g=u=!1,g&&m.length&&(m.match(/[\s\(\[\{>]$/)||(y("fail 2 at "+l+" ("+m+")"),g=!1,l+=b,h+=d)),g){w=/^([a-z0-9\-\.\/\-_%~!?=,:;&+*#@\(\)\$]+)/i.exec(x);if(w){var L=f+w[1];for(l+=L.length+c.length,h+=c,L=E(L);L.match(/[.,!;:?]$/);)L=L.substr(0,L.length-1),l--;L.match(/^(\)|^)[^\(]+\)$/)&&(L=L.substr(0,L.length-1),l--),L.match(/^(\]|^)[^\[]+\]$/)&&(L=L.substr(0,L.length-1),l--),L.match(/^(\}|^)[^\{]+\}$/)&&(L=L.substr(0,L.length-1),l--);var C=L,w=L;n&&(C=n+C),!o||(v=new RegExp("^(http|https)://","i").exec(w))&&(w=w.substr(v[1].length+3));var v=i;(w=R(w,r))!=C&&!v.match(/title=/i)&&s&&(C.match(new RegExp("https?://"+$(w),"i"))||(v+=' title="'+C+'"')),h+='<a href="'+k(C)+'"'+v+">"+k(w)+"</a>"}else y("fail 3 at "+l),g=!1,l+=b,h+=d}}return h+=t.substr(l)}var n=this,r=n.AutoLink,$=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},y=function(t){},E=function(t){return t.replace(/&(quot|gt|lt|amp|\#([0-9]+)|\#x([0-9a-f]+));/gi,function(t,e,n,r){return"quot"==e.toLowerCase()?'"':"gt"==e.toLowerCase()?">":"lt"==e.toLowerCase()?"<":"amp"==e.toLowerCase()?"&":n?String.fromCharCode(parseInt(n)):r?String.fromCharCode(parseInt(r,16)):void 0})},k=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},R=function(t,e){return e&&t.length>e?t.substr(0,e-3)+"...":t};t.prototype.link=function(t){return t=e(t,new RegExp("[a-z][a-z-]+://","ig"),null,this.maxLength,this.tagFill,this.autoTitle,this.stripProtocols),t=e(t,new RegExp("(mailto|skype):","ig"),null,this.maxLength,this.tagFill,this.autoTitle,this.stripProtocols),t=e(t,new RegExp("www\\.","ig"),"http://",this.maxLength,this.tagFill,this.autoTitle,this.stripProtocols)},t.prototype.linkEmail=function(t){return t=function(t,e){for(var n='[^()<>@,;:\\\\".\\[\\]\\x00-\\x20\\x7f]+',n="("+n+"(\\."+n+")*)",r=new RegExp("^"+n),i=new RegExp(n+"$"),s=t.toLowerCase(),o=0,a=!0,l="",u="",h="",g="",p="",c=0;o<t.length&&a;){var f,m,x=!0,d=s.indexOf("@",o);-1===d?x=a=!1:(u=t.substr(o,d-o),h=t.substr(d,1),g=t.substr(d+1),c=(p=u+h).length,u.split(/<\/a>/i).pop().match(/<a\s/i)&&(x=!1,o+=c,l+=p)),x&&((f=u.match(i))?(m=f[1].length,d=u.length,h=u.substr(d-m)+h,u=u.substr(0,d-m)):(x=!1,o+=c,l+=p)),x&&((f=g.match(r))?(m=f[1].length,h+=g.substr(0,m),g=g.substr(m)):(x=!1,o+=c,l+=p)),x&&(o+=u.length+h.length,l+=u,l+='<a href="mailto:'+h+'"'+e+">"+h+"</a>")}return l+=t.substr(o)}(t,this.tagFill)},t.prototype.noConflict=function(){return n.AutoLink=r,t},"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=t:exports).AutoLink=t:"function"==typeof define&&define.amd?define(function(){return t}):n.AutoLink=t}.call(function(){return this||("undefined"!=typeof window?window:global)}());
